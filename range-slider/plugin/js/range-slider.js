module.exports=function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=class{constructor(){this._error={MIN_SHOULD_BE_NUMBER:"Тип свойства min должно быть number",MAX_SHOULD_BE_NUMBER:"Тип свойства max должно быть number",FROM_SHOULD_BE_NUMBER:"Тип свойства from должно быть number",TO_SHOULD_BE_NUMBER:"Тип свойства to должно быть number",STEP_SHOULD_BE_NUMBER:"Тип свойства step должно быть number",RANGE_SHOULD_BE_BOOLEAN:"Тип свойства range должно быть boolean",VERTICAL_SHOULD_BE_BOOLEAN:"Тип свойства vertical должно быть boolean",DISPLAY_HINT_SHOULD_BE_BOOLEAN:"Тип свойства displayHint должно быть boolean",DISPLAY_TRACKER_SHOULD_BE_BOOLEAN:"Тип свойства displayTracker должно быть boolean",DISPLAY_GRID_SHOULD_BE_BOOLEAN:"Тип свойства displayGrid должно быть boolean",GRID_STEP_SHOULD_BE_NUMBER:"Тип свойства gridStep должно быть number",DISABLED_SHOULD_BE_BOOLEAN:"Тип свойства disabled должно быть boolean",ON_INIT_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onInit должно быть function или null",ON_START_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onStart должно быть function или null",ON_SLIDE_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onSlide должно быть function или null",ON_CHANGE_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onChange должно быть function или null",ON_FINISH_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onFinish должно быть function или null",ON_UPDATE_SHOULD_BE_FUNCTION_OR_NULL:"Тип свойства onUpdate должно быть function или null"}}getNormalizedConfig(t){let{min:e,max:i,step:r,from:s,to:n}=t;return e=Number(e.toFixed(4)),i=Number(i.toFixed(4)),r=Number(r.toFixed(4)),i<e&&(i=e),(s=this.getNormalizedValue(s,e,i,r))>(n=this.getNormalizedValue(n,s,i,r))&&(s=n),{...t,min:e,max:i,step:r,from:s,to:n}}getNormalizedValue(t,e,i,r){let s=t;if(s<e)s=e;else if(s<=i-(i-e)%r){const t=Number((s-(s-e)%r).toFixed(4)),i=Number((s+r-(s-e)%r).toFixed(4));s=s<(t+i)/2?t:i}else s=i;return s}checkConfigTypes(t){if("number"!=typeof t.min||Number.isNaN(t.min))throw new Error(this._error.MIN_SHOULD_BE_NUMBER);if("number"!=typeof t.max||Number.isNaN(t.max))throw new Error(this._error.MAX_SHOULD_BE_NUMBER);if("number"!=typeof t.from||Number.isNaN(t.from))throw new Error(this._error.FROM_SHOULD_BE_NUMBER);if("number"!=typeof t.to||Number.isNaN(t.to))throw new Error(this._error.TO_SHOULD_BE_NUMBER);if("number"!=typeof t.step||Number.isNaN(t.step))throw new Error(this._error.STEP_SHOULD_BE_NUMBER);if("boolean"!=typeof t.range)throw new Error(this._error.RANGE_SHOULD_BE_BOOLEAN);if("boolean"!=typeof t.vertical)throw new Error(this._error.VERTICAL_SHOULD_BE_BOOLEAN);if("boolean"!=typeof t.displayHint)throw new Error(this._error.DISPLAY_HINT_SHOULD_BE_BOOLEAN);if("boolean"!=typeof t.displayTracker)throw new Error(this._error.DISPLAY_TRACKER_SHOULD_BE_BOOLEAN);if("boolean"!=typeof t.displayGrid)throw new Error(this._error.DISPLAY_GRID_SHOULD_BE_BOOLEAN);if("number"!=typeof t.gridStep||Number.isNaN(t.gridStep))throw new Error(this._error.GRID_STEP_SHOULD_BE_NUMBER);if("boolean"!=typeof t.disabled)throw new Error(this._error.DISABLED_SHOULD_BE_BOOLEAN);if("function"!=typeof t.onInit&&null!==t.onInit)throw new Error(this._error.ON_INIT_SHOULD_BE_FUNCTION_OR_NULL);if("function"!=typeof t.onStart&&null!==t.onStart)throw new Error(this._error.ON_START_SHOULD_BE_FUNCTION_OR_NULL);if("function"!=typeof t.onSlide&&null!==t.onSlide)throw new Error(this._error.ON_SLIDE_SHOULD_BE_FUNCTION_OR_NULL);if("function"!=typeof t.onChange&&null!==t.onChange)throw new Error(this._error.ON_CHANGE_SHOULD_BE_FUNCTION_OR_NULL);if("function"!=typeof t.onFinish&&null!==t.onFinish)throw new Error(this._error.ON_FINISH_SHOULD_BE_FUNCTION_OR_NULL);if("function"!=typeof t.onUpdate&&null!==t.onUpdate)throw new Error(this._error.ON_UPDATE_SHOULD_BE_FUNCTION_OR_NULL)}toString(){return'{"class": "ConfigNormalizer"}'}};var s=class{constructor(...t){this.handle={FROM:1,TO:2},this._currentHandle=null,this._observers=[],this._initialConfig=null,this._config=null,this._configNormalizer=new r,this._initConfig(t)}addObserver(t){return!(this._observers.filter(e=>e===t).length>0||(this._observers.push(t),0))}getConfig(){return this._config}startSlide(t){return!this._currentHandle&&!this._config.disabled&&(this._currentHandle=t,this._call(this._config.onStart),!0)}finishSlide(){return!!this._currentHandle&&(this._currentHandle=null,this._call(this._config.onFinish),!0)}slide(t){if(!this._currentHandle)return;const e=this._configNormalizer,i=this._config,{min:r,max:s,from:n,to:o,step:a,range:l,onChange:_,onSlide:d}=i;this._currentHandle===this.handle.FROM?i.from=e.getNormalizedValue(t,r,l?o:s,a):this._currentHandle===this.handle.TO&&(i.to=e.getNormalizedValue(t,n,s,a)),i.from===n&&i.to===o||this._call(_),this._call(d),this._notifyObservers()}update(t){const{onUpdate:e}=this._config;Object.assign(this._config,this.validate(t)),this._call(e),this._notifyObservers()}reset(){this.update(this._initialConfig)}validate(t){const e=this._configNormalizer,i={...this._config,...t};return e.checkConfigTypes(i),e.getNormalizedConfig(i)}getNearestHandle(t){const{range:e,from:i,to:r}=this._config;return e&&Math.abs(i-t-1)>Math.abs(r-t+1)?this.handle.TO:this.handle.FROM}toString(){return JSON.stringify({class:"Model",...this._config})}_initConfig(t){this._config={min:0,max:100,range:!1,from:0,to:10,step:1,vertical:!1,displayHint:!1,displayTracker:!1,displayGrid:!1,gridStep:25,disabled:!1,onInit:null,onStart:null,onSlide:null,onChange:null,onFinish:null,onUpdate:null},t.forEach(t=>{Object.assign(this._config,t)}),this._config=this.validate(this._config),this._initialConfig={...this._config},this._call(this._config.onInit)}_notifyObservers(){const t=this._config;this._observers.forEach(e=>{e(t)})}_call(t){"function"==typeof t&&t(this._config)}};var n=class{constructor(t,e,i){this._model=t,this._views=e,this._id=i,this._addObservers(),this._bindEvents()}toString(){return`{"class": "Controller", "id": "${this._id}"}`}_addObservers(){this._model.addObserver(this._views.sliderView.update.bind(this._views.sliderView)),this._model.addObserver(this._views.handleView.update.bind(this._views.handleView)),this._model.addObserver(this._views.hintView.update.bind(this._views.hintView)),this._model.addObserver(this._views.trackerView.update.bind(this._views.trackerView)),this._model.addObserver(this._views.gridView.update.bind(this._views.gridView))}_bindEvents(){const t=$(window),e=$(document),i=this._handleRangeSliderMouseDown.bind(this),r=this._handleWindowMouseMove.bind(this),s=this._handleWindowMouseUp.bind(this),n=this._handleWindowResize.bind(this),o=this._handleDocumentReady.bind(this);this._views.sliderView.getRoot().on(`mousedown.Controller${this._id}`,i),t.on(`mousemove.Controller${this._id}`,r),t.on(`mouseup.Controller${this._id}`,s),t.on(`resize.Controller${this._id}`,n),e.ready(o)}_handleRangeSliderMouseDown(t){t.preventDefault();const e=this._calculateValue(t),i=this._model.getNearestHandle(e);this._model.startSlide(i),this._model.slide(e)}_handleWindowMouseMove(t){const e=this._calculateValue(t);this._model.slide(e)}_calculateValue(t){const{vertical:e,min:i,max:r}=this._model.getConfig(),s=this._getPointCoord(t),n=this._getSliderSizeInPx();return i+(r-i)*(e?1-s/(n-1):s/(n-1))}_getPointCoord(t){const{vertical:e}=this._model.getConfig(),{sliderView:i}=this._views,r=t.pageX-i.getRoot().offset().left,s=t.pageY-i.getRoot().offset().top;return e?s:r}_getSliderSizeInPx(){const{vertical:t}=this._model.getConfig(),{sliderView:e}=this._views;return t?e.getRoot().height():e.getRoot().width()}_handleWindowMouseUp(){this._model.finishSlide()}_handleWindowResize(){this._updateViews()}_handleDocumentReady(){this._updateViews()}_updateViews(){const{sliderView:t,handleView:e,hintView:i,trackerView:r,gridView:s}=this._views,n=this._model.getConfig();t.update(n),e.update(n),i.update(n),r.update(n),s.update(n)}};var o=class{constructor(t){this._$root=$(t).addClass("range-slider")}getRoot(){return this._$root}update(t){const{vertical:e}=t;e?this._setToVertical():this._setToHorizontal()}toString(){return'{"class": "SliderView"}'}_setToVertical(){this._$root.addClass("range-slider_vertical")}_setToHorizontal(){this._$root.removeClass("range-slider_vertical")}};var a=class{constructor(t){this._$leftHandle=$("<div>").appendTo(t).addClass("range-slider__handle"),this._$rightHandle=$("<div>").appendTo(t).addClass("range-slider__handle")}getLeftHandle(){return this._$leftHandle}getRightHandle(){return this._$rightHandle}update(t){const{range:e}=t;e?this._displayRightHandle():this._hideRightHandle(),this._calculateHandlePosition(t)}toString(){return'{"class": "HandleView"}'}_displayRightHandle(){this._$rightHandle.removeClass("range-slider__handle_hidden")}_hideRightHandle(){this._$rightHandle.addClass("range-slider__handle_hidden")}_calculateHandlePosition({min:t,max:e,from:i,to:r,vertical:s}){const n=t!==e?(i-t)/(e-t)*100:0,o=t!==e?(r-t)/(e-t)*100:0;s?(this._$leftHandle.css("bottom",`${n}%`).css("left",""),this._$rightHandle.css("bottom",`${o}%`).css("left","")):(this._$leftHandle.css("left",`${n}%`).css("bottom",""),this._$rightHandle.css("left",`${o}%`).css("bottom",""))}};var l=class{constructor(t){this._handleView=t,this._$leftHint=$("<div>").appendTo(t.getLeftHandle()).addClass("range-slider__hint"),this._$rightHint=$("<div>").appendTo(t.getRightHandle()).addClass("range-slider__hint")}update(t){const{displayHint:e}=t;e?(this._displayHints(),this._setHintText(t),this._calculateHintPosition(t)):this._hideHints()}toString(){return'{"class": "HintView"}'}_displayHints(){this._$leftHint.removeClass("range-slider__hint_hidden"),this._$rightHint.removeClass("range-slider__hint_hidden")}_hideHints(){this._$leftHint.addClass("range-slider__hint_hidden"),this._$rightHint.addClass("range-slider__hint_hidden")}_setHintText({from:t,to:e}){this._$leftHint.text(t),this._$rightHint.text(e)}_calculateHintPosition({vertical:t,from:e,to:i}){const r=this._$leftHint,s=this._$rightHint,n=this._handleView.getLeftHandle(),o=this._handleView.getRightHandle(),a=n.offset().top,l=n.offset().top+n.outerHeight(),_=n.offset().left,d=n.offset().left+n.outerWidth(),h=o.offset().top,c=o.offset().top+o.outerHeight(),f=o.offset().left,u=o.offset().left+o.outerWidth();t?(this._alignHintBetweenVerticalPoints(r,a,l),this._alignHintBetweenVerticalPoints(s,h,c),r.css("left",""),s.css("left","")):(this._alignHintBetweenHorizontalPoints(r,_,d),this._alignHintBetweenHorizontalPoints(s,f,u),r.css("top",""),s.css("top","")),this._checkCollisionOfHints()&&(r.text(`${e} — ${i}`),s.addClass("range-slider__hint_hidden"),t?this._alignHintBetweenVerticalPoints(r,h,l):this._alignHintBetweenHorizontalPoints(r,_,u))}_alignHintBetweenHorizontalPoints(t,e,i){let r=e-(t.outerWidth()-i+e)/2;r=this._getOffsetLeftWithoutFallingOutOfDocument(r,t.outerWidth()),t.offset({left:r})}_alignHintBetweenVerticalPoints(t,e,i){let r=e-(t.outerHeight()-i+e)/2;r=this._getOffsetTopWithoutFallingOutOfDocument(r,t.outerHeight()),t.offset({top:r})}_getOffsetLeftWithoutFallingOutOfDocument(t,e){const i=$("html").width();return t<0?0:t+e>i?i-e:t}_getOffsetTopWithoutFallingOutOfDocument(t){return t<0?0:t}_checkCollisionOfHints(){const t=this._$leftHint,e=this._$rightHint;if("hidden"===t.css("visibility")||"hidden"===e.css("visibility"))return!1;const i=t.offset().left,r=t.offset().left+t.outerWidth(),s=e.offset().left,n=e.offset().left+e.outerWidth(),o=!(i<=s&&r<=s||i>=n&&r>=n),a=t.offset().top,l=t.offset().top+t.outerHeight(),_=e.offset().top,d=e.offset().top+e.outerHeight();return o&&!(a<=_&&l<=_||a>=d&&l>=d)}};var _=class{constructor(t){this._$tracker=$("<div>").appendTo(t).addClass("range-slider__tracker")}update(t){const{displayTracker:e}=t;e?(this._displayTracker(),this._calculateTrackerSize(t),this._calculateTrackerPosition(t)):this._hideTracker()}toString(){return'{"class": "TrackerView"}'}_displayTracker(){this._$tracker.removeClass("range-slider__tracker_hidden")}_hideTracker(){this._$tracker.addClass("range-slider__tracker_hidden")}_calculateTrackerSize({min:t,max:e,from:i,to:r,range:s,vertical:n}){const o=t!==e?(i-t)/(e-t)*100:0,a=s?(t!==e?(r-t)/(e-t)*100:0)-o:o;n?this._$tracker.css("height",`${a}%`).css("width",""):this._$tracker.css("width",`${a}%`).css("height","")}_calculateTrackerPosition({min:t,max:e,from:i,range:r,vertical:s}){const n=r?(i-t)/(e-t)*100:0;s?this._$tracker.css("bottom",`${n}%`).css("left",""):this._$tracker.css("left",`${n}%`).css("bottom","")}};var d=class{constructor(t){this._$grid=$("<div>").appendTo(t).addClass("range-slider__grid")}update(t){const{displayGrid:e}=t;e?(this._displayGrid(),this._updateGrid(t)):this._hideGrid()}toString(){return'{"class": "GridView"}'}_displayGrid(){this._$grid.removeClass("range-slider__grid_hidden")}_hideGrid(){this._$grid.addClass("range-slider__grid_hidden")}_updateGrid({min:t,max:e,gridStep:i,vertical:r}){this._$grid.empty();for(let s=t;s<e;s+=i){const n=(s-t)/(e-t)*100,o=r?"bottom":"left";this._addGridMark(s,n,o),s+i>=e&&this._addGridMark(e,100,o)}}_addGridMark(t,e,i){$("<div>").appendTo(this._$grid).addClass("range-slider__grid-mark").text(t).css(i,`${e}%`)}};class h{constructor(t){this.handle=t.handle,this._model=t}slide(t,e){this._model.startSlide(t),this._model.slide(e),this._model.finishSlide()}update(t){this._model.update(t)}reset(){this._model.reset()}toString(){return'{"class": "RangeSlider"}'}static init(t){const e=t;e.fn.rangeSlider=function(t){return this.each(function(i){if(!e(this).data("range-slider")){const r=e(this).data(),c=new s(t,r),f=new o(this),u=new a(this),g=new l(u),O=new _(this),p=new d(this);new n(c,{sliderView:f,handleView:u,hintView:g,trackerView:O,gridView:p},i),e(this).data("range-slider",new h(c))}})}}}e.default=h}]);